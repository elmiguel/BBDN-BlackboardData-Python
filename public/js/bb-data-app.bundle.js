/*! For license information please see bb-data-app.bundle.js.LICENSE.txt */
!function(t){var e={};function a(s){if(e[s])return e[s].exports;var r=e[s]={i:s,l:!1,exports:{}};return t[s].call(r.exports,r,r.exports,a),r.l=!0,r.exports}a.m=t,a.c=e,a.d=function(t,e,s){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},a.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(a.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)a.d(s,r,function(e){return t[e]}.bind(null,r));return s},a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="",a(a.s="./client/ts/bb-data-app.ts")}({"./client/ts/bb-data-app.ts":function(t,e,a){"use strict";a.r(e);var s=a("./client/ts/components/bb-data-basic-table.ts");customElements.define("bb-data-table-basic",s.a),console.log("created irsc custom elements...")},"./client/ts/components/bb-data-basic-table.ts":function(t,e,a){"use strict";a.d(e,"a",(function(){return n}));var s=a("./client/ts/core/bb-data-abstract-class.ts"),r=a("./client/ts/core/bb-data-service.ts"),i=a("./client/ts/core/bb-data-state.ts");class n extends s.a{constructor(){super(),this.bbDataService=new r.a,this.unsubscribe=new rxjs.Subject,this.template=window.document.createElement("table"),console.log("[Bb Data Table - Basic Loaded]"),this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(this.template),this.queryName=this.getAttribute("queryName"),console.log(`[queryName] ${this.queryName}`),this.table=this.shadowRoot.querySelector("table"),this.dataTable=new simpleDatatables.DataTable(this.table,{data:{},columns:[{select:3,type:"date",format:"MM/DD/YYYY"}]}),this.data=this.bbDataService.runQuery(this.queryName),this.dataState=new i.a(this.queryName)}static get observedAttributes(){return["queryname"]}connectedCallback(){this.data.pipe(rxjs.operators.takeUntil(this.unsubscribe),rxjs.operators.filter(t=>null!==t),rxjs.operators.map(t=>Object.assign({},t))).subscribe(t=>{const e={};e[this.queryName]=t,this.dataState.updateState(e),this.disconnectedCallback()}),this.dataState.getStateSlice(this.queryName).subscribe(t=>{console.log("[dataState.getStateSlice.subscribe()]",t),this.dataTable.data=null,this.dataTable.import(t)})}disconnectedCallback(){this.unsubscribe.next()}}},"./client/ts/core/bb-data-abstract-class.ts":function(t,e,a){"use strict";a.d(e,"a",(function(){return s}));class s extends HTMLElement{constructor(){super();const t=this;window.irsc||(window.irsc={}),t.constructor.observedAttributes&&t.constructor.observedAttributes.length&&t.constructor.observedAttributes.forEach(t=>{"data"!==t&&(/[-]/gim.test(t)&&(t=this.pascalCase(t)),Object.defineProperty(this,t,{get(){return this.getAttribute(t)},set(e){e?this.setAttribute(t,e):this.removeAttribute(t)}}))})}attributeChangedCallback(t,e,a){const s=this[`slot${this.titleize(this.pascalCase(t))}`];s&&(s.innerText=a)}pascalCase(t){return t.split("-").map((t,e)=>0===e?t:this.titleize(t)).join("")}titleize(t){return t.charAt(0).toUpperCase()+t.slice(1)}}},"./client/ts/core/bb-data-service.ts":function(t,e,a){"use strict";a.d(e,"a",(function(){return r}));var s=function(t,e,a,s){return new(a||(a=Promise))((function(r,i){function n(t){try{c(s.next(t))}catch(t){i(t)}}function o(t){try{c(s.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof a?e:new a((function(t){t(e)}))).then(n,o)}c((s=s.apply(t,e||[])).next())}))};class r{constructor(){this.unsubscribe=new rxjs.Subject,this.bbDataUrl="http://localhost:3000/queries",window.hasOwnProperty("bbdata")||(window.bbdata={}),window.irsc.hasOwnProperty("BbDataService")||(window.irsc.PathwayService=this),this.bbdata=window.bbdata}runQuery(t,e=null){return"test"===t?new rxjs.BehaviorSubject({headings:["Name","Company","Ext.","Start Date","Email","Phone No."],data:[["Hedwig F. Nguyen","Arcu Vel Foundation","9875","03/27/2017","nunc.ullamcorper@metusvitae.com","070 8206 9605"],["Genevieve U. Watts","Eget Incorporated","9557","07/18/2017","Nullam.vitae@egestas.edu","0800 025698"],["Kyra S. Baldwin","Lorem Vitae Limited","3854","04/14/2016","in@elita.org","0800 237 8846"],["Stephen V. Hill","Eget Mollis Institute","8820","03/03/2016","eu@vel.com","0800 682 4591"],["Vielka Q. Chapman","Velit Pellentesque Ultricies Institute","2307","06/25/2017","orci.Donec.nibh@mauriserateget.edu","0800 181 5795"],["Ocean W. Curtis","Eu Ltd","6868","08/24/2017","cursus.et@cursus.edu","(016977) 9585"],["Kato F. Tucker","Vel Lectus Limited","4713","11/06/2017","Duis@Lorem.edu","070 0981 8503"],["Robin J. Wise","Curabitur Dictum PC","3285","02/09/2017","blandit@montesnascetur.edu","0800 259158"],["Uriel H. Guerrero","Mauris Inc.","2294","02/11/2018","vitae@Innecorci.net","0500 948772"],["Yasir W. Benson","At Incorporated","3897","01/13/2017","ornare.elit.elit@atortor.edu","0391 916 3600"],["Shafira U. French","Nisi Magna Incorporated","5116","07/23/2016","metus.In.nec@bibendum.ca","(018013) 26699"],["Casey E. Hood","Lorem Vitae Odio Consulting","7079","05/05/2017","justo.Praesent@sitamet.ca","0800 570796"],["Caleb X. Finch","Elit Associates","3629","09/19/2016","condimentum@eleifend.com","056 1551 7431"]]}):(this.bbdata.hasOwnProperty(t)||this.bbdata.set(t,new rxjs.BehaviorSubject(fetch(`${this.bbDataUrl}/${t}`).then(t=>t.json()).then(t=>s(this,void 0,void 0,(function*(){return t}))).catch(e=>{console.log(`There was an error in retrieving data with queryName: ${t}`),console.log(e)}))),this.bbdata.get(t).pipe(rxjs.operators.takeUntil(this.unsubscribe),rxjs.operators.switchMap(t=>rxjs.from(t))))}disconnectedCallback(){this.unsubscribe.next(null)}}},"./client/ts/core/bb-data-state.ts":function(t,e,a){"use strict";a.d(e,"a",(function(){return s}));class s{constructor(t){this._unsubscribe=new rxjs.Subject;this.state=new rxjs.BehaviorSubject({}).pipe(rxjs.operators.filter(e=>e&&e[t]))}updateState(t){console.log("[BbDataState.updateState()]",t),this.state.next(t)}getStateSlice(t){return this.state.pipe(rxjs.operators.pluck(t))}freeze(){this._unsubscribe.next(null)}}}});
//# sourceMappingURL=bb-data-app.bundle.map